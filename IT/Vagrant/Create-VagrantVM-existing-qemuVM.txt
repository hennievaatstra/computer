0. VM has been installed in virt-manager

. create tempdir
 $ mkdir tt
 $ cd tt

. convert the libvirt image to an image here
 $ sudo qemu-img convert -f raw -O qcow2 /var/lib/libvirt/images/rhel8-node1.qcow2 rhel8node1.qcow2

. create metadata file
 $ vi metadata.json
{
  "provider"     : "libvirt",
  "format"       : "qcow2",
  "virtual_size" : 40
}

. create Vagrantfile
 $ vi Vagrantfile
Vagrant.configure("2") do |config|
         config.vm.provider :libvirt do |libvirt|
         libvirt.driver = "kvm"
         libvirt.host = 'localhost'
         libvirt.uri = 'qemu:///system'
         end
config.vm.define "new" do |custombox|
         custombox.vm.box = "custombox"       
         custombox.vm.provider :libvirt do |test|
         test.memory = 1024
         test.cpus = 1
         end
         end
end

. rename imagefile
 $ mv rhel8node1.qcow2 box.img

. create tar file for Vagrant
 $ tar cvzf rhel8.box ./metadata.json ./Vagrantfile ./box.img

. add the new file to Vagrant
 $ vagrant box add -name rhel8.4 rhel8.box

. check
 $ vagrant box list
centos/8           (libvirt, 2011.0)
generic/opensuse15 (libvirt, 3.2.14)
rhel8.4            (libvirt, 0)

. add machines
 $ cd ~/Vagrant
 $ mkdir rhel8-master
 $ cd $_
 $ vagrant init rhel8.4

--- older
1. create dir for Vagrant
 $ mkdir Vagrant
 $ mkdir rhel8-node1
 $ vagrant init centos/8
 $ sudo vi Vagrantfile, add:

config.vm.provider :libvirt do |domain|
 domain.driver = "kvm"
 domain.host = 'localhost'
 domain.uri = 'qemu:///system'
 domain.memory = 1024
 domain.cpus = 1
end

	$ vagrant up

